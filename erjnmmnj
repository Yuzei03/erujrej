-- Define constants and variables
local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Parent = player.PlayerGui
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 300, 0, 400)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Visible = true
mainFrame.Parent = gui

-- Function to create a text label
local function createLabel(text, position)
    local label = Instance.new("TextLabel")
    label.Text = text
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextSize = 18
    label.Font = Enum.Font.SourceSans
    label.Position = UDim2.new(0, 10, 0, position)
    label.Size = UDim2.new(1, -20, 0, 30)
    label.BackgroundTransparency = 1
    label.Parent = mainFrame
    return label
end

-- Function to create an input box
local function createInput(defaultValue, numeric, position)
    local input = Instance.new("TextBox")
    input.PlaceholderText = defaultValue
    input.Text = ""
    input.TextColor3 = Color3.fromRGB(255, 255, 255)
    input.TextSize = 18
    input.Font = Enum.Font.SourceSans
    input.Position = UDim2.new(0, 10, 0, position)
    input.Size = UDim2.new(1, -20, 0, 30)
    input.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    input.BorderColor3 = Color3.fromRGB(100, 100, 100)
    input.Parent = mainFrame
    return input
end

-- Function to create a button
local function createButton(text, onClick, position)
    local button = Instance.new("TextButton")
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextSize = 18
    button.Font = Enum.Font.SourceSans
    button.Position = UDim2.new(0, 10, 0, position)
    button.Size = UDim2.new(1, -20, 0, 30)
    button.BackgroundColor3 = Color3.fromRGB(50, 120, 200)
    button.BorderColor3 = Color3.fromRGB(100, 100, 100)
    button.Parent = mainFrame
    button.MouseButton1Click:Connect(onClick)
    return button
end

-- Create GUI components
local speedInput = createInput("16", true, 10)
createLabel("Enter Speed:", 50)
local applySpeedButton = createButton("Apply Speed", function()
    local speed = tonumber(speedInput.Text)
    if speed then
        player.Character.Humanoid.WalkSpeed = speed
        _G.WalkSpeed = speed
    else
        print("Invalid speed input!")
    end
end, 90)

local hitboxInput = createInput("5", true, 150)
createLabel("Enter Hitbox Size:", 190)
local applyHitboxButton = createButton("Apply Hitbox (ESP)", function()
    local size = tonumber(hitboxInput.Text)
    if size then
        _G.HeadSize = size
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player then
                local rootPart = otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart")
                if rootPart then
                    rootPart.Size = Vector3.new(size, size, size)
                    rootPart.Transparency = 0.7
                    rootPart.BrickColor = BrickColor.new("Really blue")
                    rootPart.Material = Enum.Material.Neon
                    rootPart.CanCollide = false
                end
            end
        end
    else
        print("Invalid hitbox size input!")
    end
end, 230)

local enableESPToggle = createButton("Enable ESP", function()
    _G.Disabled = not _G.Disabled
    if not _G.Disabled then
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player then
                local rootPart = otherPlayer.Character and otherPlayer.Character:FindFirstChild("HumanoidRootPart")
                if rootPart then
                    rootPart.Size = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
                    rootPart.Transparency = 0.7
                    rootPart.BrickColor = BrickColor.new("Really blue")
                    rootPart.Material = Enum.Material.Neon
                    rootPart.CanCollide = false
                end
            end
        end
    end
end, 310)

-- Function to toggle GUI visibility
local guiMinimized = false
local function toggleGUI()
    guiMinimized = not guiMinimized
    mainFrame.Visible = not guiMinimized
end

-- Add minimize button
createButton("Minimize", toggleGUI, 350)

-- Function to handle keyboard input
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.H then
        toggleGUI()
    end
end)

-- Initial visibility
mainFrame.Visible = true
